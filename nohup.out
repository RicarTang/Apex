[2023-07-17 22:42:04 +0800] [1253670] [DEBUG] Current configuration:
  config: gunicorn.conf.py
  wsgi_app: None
  bind: ['0.0.0.0:4000']
  backlog: 2048
  workers: 1
  worker_class: uvicorn.workers.UvicornWorker
  threads: 4
  worker_connections: 2000
  max_requests: 0
  max_requests_jitter: 0
  timeout: 30
  graceful_timeout: 30
  keepalive: 2
  limit_request_line: 4094
  limit_request_fields: 100
  limit_request_field_size: 8190
  reload: False
  reload_engine: auto
  reload_extra_files: []
  spew: False
  check_config: False
  print_config: False
  preload_app: True
  sendfile: None
  reuse_port: False
  chdir: /data/Fastapi_tortoise
  daemon: False
  raw_env: []
  pidfile: None
  worker_tmp_dir: None
  user: 0
  group: 0
  umask: 0
  initgroups: False
  tmp_upload_dir: None
  secure_scheme_headers: {'X-FORWARDED-PROTOCOL': 'ssl', 'X-FORWARDED-PROTO': 'https', 'X-FORWARDED-SSL': 'on'}
  forwarded_allow_ips: ['127.0.0.1']
  accesslog: -
  disable_redirect_access_to_syslog: False
  access_log_format: %(h)s %(l)s %(u)s %(t)s "%(r)s" %(s)s %(b)s "%(f)s" "%(a)s"
  errorlog: -
  loglevel: debug
  capture_output: False
  logger_class: gunicorn.glogging.Logger
  logconfig: None
  logconfig_dict: {}
  syslog_addr: udp://localhost:514
  syslog: False
  syslog_prefix: None
  syslog_facility: user
  enable_stdio_inheritance: False
  statsd_host: None
  dogstatsd_tags: 
  statsd_prefix: 
  proc_name: None
  default_proc_name: main:app
  pythonpath: None
  paste: None
  on_starting: <function OnStarting.on_starting at 0x7fa5f89b72e0>
  on_reload: <function OnReload.on_reload at 0x7fa5f89b7400>
  when_ready: <function WhenReady.when_ready at 0x7fa5f89b7520>
  pre_fork: <function Prefork.pre_fork at 0x7fa5f89b7640>
  post_fork: <function Postfork.post_fork at 0x7fa5f89b7760>
  post_worker_init: <function PostWorkerInit.post_worker_init at 0x7fa5f89b7880>
  worker_int: <function WorkerInt.worker_int at 0x7fa5f89b79a0>
  worker_abort: <function WorkerAbort.worker_abort at 0x7fa5f89b7ac0>
  pre_exec: <function PreExec.pre_exec at 0x7fa5f89b7be0>
  pre_request: <function PreRequest.pre_request at 0x7fa5f89b7d00>
  post_request: <function PostRequest.post_request at 0x7fa5f89b7d90>
  child_exit: <function ChildExit.child_exit at 0x7fa5f89b7eb0>
  worker_exit: <function WorkerExit.worker_exit at 0x7fa5f89d8040>
  nworkers_changed: <function NumWorkersChanged.nworkers_changed at 0x7fa5f89d8160>
  on_exit: <function OnExit.on_exit at 0x7fa5f89d8280>
  proxy_protocol: False
  proxy_allow_ips: ['127.0.0.1']
  keyfile: None
  certfile: None
  ssl_version: 2
  cert_reqs: 0
  ca_certs: None
  suppress_ragged_eofs: True
  do_handshake_on_connect: False
  ciphers: None
  raw_paste_global_conf: []
  strip_header_spaces: False
INFO:     2023-07-17 22:42:05,384 - main.py - <module> - line: 66 - message: 暂无后台任务！
[2023-07-17 22:42:05 +0800] [1253670] [INFO] Starting gunicorn 20.1.0
[2023-07-17 22:42:05 +0800] [1253670] [DEBUG] Arbiter booted
[2023-07-17 22:42:05 +0800] [1253670] [INFO] Listening at: http://0.0.0.0:4000 (1253670)
[2023-07-17 22:42:05 +0800] [1253670] [INFO] Using worker: uvicorn.workers.UvicornWorker
[2023-07-17 22:42:05 +0800] [1253845] [INFO] Booting worker with pid: 1253845
[2023-07-17 22:42:05 +0800] [1253845] [INFO] Started server process [1253845]
[2023-07-17 22:42:05 +0800] [1253845] [INFO] Waiting for application startup.
[2023-07-17 22:42:05 +0800] [1253845] [INFO] Application startup complete.
[2023-07-17 22:42:05 +0800] [1253670] [DEBUG] 1 workers
120.36.214.60:23214 - "GET /docs HTTP/1.1" 200
120.36.214.60:23214 - "GET /openapi.json HTTP/1.1" 200
120.36.214.60:22185 - "GET /docs HTTP/1.1" 200
120.36.214.60:22185 - "GET /openapi.json HTTP/1.1" 200
47.92.37.1:64221 - "GET http%3A//112.124.58.46%3A4000/ HTTP/1.1" 404
120.36.214.60:25527 - "GET /docs HTTP/1.1" 200
120.36.214.60:25527 - "GET /openapi.json HTTP/1.1" 200
120.36.214.60:25528 - "GET /user/users?limit=20&page=1 HTTP/1.1" 401
120.36.214.60:25143 - "GET /openapi.json HTTP/1.1" 200
120.36.214.60:22704 - "POST /user/login HTTP/1.1" 500
[2023-07-17 22:49:42 +0800] [1253845] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/tortoise/backends/mysql/client.py", line 114, in create_connection
    self._pool = await mysql.create_pool(password=self.password, **self._template)
  File "asyncmy/pool.pyx", line 216, in _create_pool
  File "asyncmy/pool.pyx", line 217, in asyncmy.pool._create_pool
  File "asyncmy/pool.pyx", line 145, in fill_free_pool
  File "asyncmy/connection.pyx", line 1299, in _connect
  File "asyncmy/connection.pyx", line 550, in connect
  File "asyncmy/connection.pyx", line 528, in asyncmy.connection.Connection.connect
  File "asyncmy/connection.pyx", line 805, in _request_authentication
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/asyncmy/auth.py", line 245, in caching_sha2_password_auth
    pkt = await _roundtrip(conn, data)
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/asyncmy/auth.py", line 115, in _roundtrip
    pkt = await conn.read_packet()
  File "asyncmy/connection.pyx", line 600, in read_packet
  File "asyncmy/protocol.pyx", line 190, in asyncmy.protocol.MysqlPacket.raise_for_error
  File "asyncmy/protocol.pyx", line 194, in asyncmy.protocol.MysqlPacket.raise_for_error
  File "asyncmy/errors.pyx", line 128, in asyncmy.errors.raise_mysql_exception
  File "asyncmy/errors.pyx", line 137, in asyncmy.errors.raise_mysql_exception
asyncmy.errors.OperationalError: (1049, "Unknown database 'tortoise'")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/fastapi/applications.py", line 290, in __call__
    await super().__call__(scope, receive, send)
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/fastapi/routing.py", line 241, in app
    raw_response = await run_endpoint_function(
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/fastapi/routing.py", line 167, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/Fastapi_tortoise/src/api/users.py", line 147, in login
    await Users.get(username=user.username)
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/tortoise/queryset.py", line 1008, in _execute
    instance_list = await self._db.executor_class(
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/tortoise/backends/base/executor.py", line 131, in execute_select
    _, raw_results = await self.db.execute_query(query.get_sql())
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/tortoise/backends/mysql/client.py", line 44, in translate_exceptions_
    return await func(self, *args)
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/tortoise/backends/mysql/client.py", line 196, in execute_query
    async with self.acquire_connection() as connection:
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/tortoise/backends/base/client.py", line 326, in __aenter__
    await self.ensure_connection()
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/tortoise/backends/base/client.py", line 322, in ensure_connection
    await self.client.create_connection(with_db=True)
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/tortoise/backends/mysql/client.py", line 130, in create_connection
    raise DBConnectionError(f"Can't connect to MySQL server: {self._template}")
tortoise.exceptions.DBConnectionError: Can't connect to MySQL server: {'host': '127.0.0.1', 'port': 3306, 'user': 'root', 'db': 'tortoise', 'autocommit': True, 'charset': 'utf8mb4', 'minsize': 1, 'maxsize': 5, 'sql_mode': 'STRICT_TRANS_TABLES'}
120.36.214.60:22363 - "POST /user/login HTTP/1.1" 500
[2023-07-17 22:52:21 +0800] [1253845] [ERROR] Exception in ASGI application
Traceback (most recent call last):
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/tortoise/backends/mysql/client.py", line 44, in translate_exceptions_
    return await func(self, *args)
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/tortoise/backends/mysql/client.py", line 199, in execute_query
    await cursor.execute(query, values)
  File "asyncmy/cursors.pyx", line 179, in execute
  File "asyncmy/cursors.pyx", line 364, in _query
  File "asyncmy/connection.pyx", line 450, in query
  File "asyncmy/connection.pyx", line 638, in _read_query_result
  File "asyncmy/connection.pyx", line 1025, in read
  File "asyncmy/connection.pyx", line 600, in read_packet
  File "asyncmy/protocol.pyx", line 190, in asyncmy.protocol.MysqlPacket.raise_for_error
  File "asyncmy/protocol.pyx", line 194, in asyncmy.protocol.MysqlPacket.raise_for_error
  File "asyncmy/errors.pyx", line 128, in asyncmy.errors.raise_mysql_exception
  File "asyncmy/errors.pyx", line 137, in asyncmy.errors.raise_mysql_exception
asyncmy.errors.ProgrammingError: (1146, "Table 'tortoise.users' doesn't exist")

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/uvicorn/protocols/http/h11_impl.py", line 419, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/fastapi/applications.py", line 290, in __call__
    await super().__call__(scope, receive, send)
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
    raise exc
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/fastapi/routing.py", line 241, in app
    raw_response = await run_endpoint_function(
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/fastapi/routing.py", line 167, in run_endpoint_function
    return await dependant.call(**values)
  File "/data/Fastapi_tortoise/src/api/users.py", line 147, in login
    await Users.get(username=user.username)
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/tortoise/queryset.py", line 1008, in _execute
    instance_list = await self._db.executor_class(
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/tortoise/backends/base/executor.py", line 131, in execute_select
    _, raw_results = await self.db.execute_query(query.get_sql())
  File "/root/.local/share/virtualenvs/Fastapi_tortoise-yfzCxeY2/lib/python3.10/site-packages/tortoise/backends/mysql/client.py", line 52, in translate_exceptions_
    raise OperationalError(exc)
tortoise.exceptions.OperationalError: (1146, "Table 'tortoise.users' doesn't exist")
120.36.214.60:21951 - "POST /user/login HTTP/1.1" 404
120.36.214.60:23189 - "POST /user/create HTTP/1.1" 401
120.36.214.60:22265 - "POST /user/create HTTP/1.1" 401
47.92.79.71:64187 - "GET http%3A//112.124.58.46%3A4000/ HTTP/1.1" 404
120.36.214.60:22871 - "GET /docs HTTP/1.1" 200
120.36.214.60:22871 - "GET /swagger-ui/swagger-ui.css HTTP/1.1" 200
120.36.214.60:22876 - "GET /swagger-ui/swagger-ui-bundle.js HTTP/1.1" 200
123.6.49.9:36737 - "GET / HTTP/1.1" 404
123.6.49.18:64302 - "GET / HTTP/1.1" 404
120.36.214.60:23199 - "GET /openapi.json HTTP/1.1" 200
120.36.214.60:23204 - "GET /docs HTTP/1.1" 200
120.36.214.60:23204 - "GET /openapi.json HTTP/1.1" 200
123.6.49.41:27187 - "GET / HTTP/1.1" 404
123.6.49.9:2358 - "GET /docs HTTP/1.1" 200
123.6.49.9:2358 - "GET /docs HTTP/1.1" 200
123.6.49.9:2358 - "GET /swagger-ui/swagger-ui.css HTTP/1.1" 200
123.6.49.15:64426 - "GET /swagger-ui/swagger-ui-bundle.js HTTP/1.1" 200
[2023-07-18 04:42:41 +0800] [1253845] [WARNING] Invalid HTTP request received.
[2023-07-18 06:15:56 +0800] [1253845] [WARNING] Invalid HTTP request received.
